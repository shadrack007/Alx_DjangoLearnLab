{% extends 'blog/base.html' %}

{% block title %} Post Lists {% endblock %}

{% block content %}
<div>
    <!--    header with a Post create button-->
    <div>
        <h1>Posts</h1>
        <a href="{% url 'post_create' %}">+Create Post</a>
    </div>
    <!--   Post lists-->

    <div>
        {% if object_list %}
        {% for post in object_list %}
        <div>
            <h3>{{ post.title }}</h3>
            {% if post.tags.all %}

            <ul>
                {% for tag in post.tags.all %}
                <li>
                    <a href="{% url 'posts_by_tag' tag.slug %}">{{ tag.name }}</a>
                </li>
                {% endfor %}
            </ul>
            {% endif %}
            <p>{{ post.content|truncatewords:30}}</p>

            <div>
                By {{ post.author.username }} - {{ post.published_date|date:"M d, Y"}}
            </div>
            <a href="{% url 'post_details' post.id %}">Read More</a>
        </div>
        {% endfor %}
        {% else %}
        <div>
            <h3>No Posts Available</h3>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}