{% extends 'blog/base.html' %}

{% block title %}
Post search result
{% endblock %}

{% block content %}
{% if query %}
<p>Results for "{{ query }}"</p>
{% endif %}

{% if search_results %}
<ul>
    {% for post in search_results %}
    <li>
        <a href="{% url 'post_details' pk=post.pk %}">{{ post.title }}</a>
        <p>{{ post.content|truncatewords:20 }}</p>
        <p>
            Tags:
            {% for tag in post.tags.all %}
            <span>
                 <a href="{% url 'posts_by_tag' tag.slug %}">{{ tag.name }}</a>
            </span>
            {% empty %}
            No tags
            {% endfor %}
        </p>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No results found</p>
{% endif %}
{% endblock %}